@startuml
!theme mars

title Communication Diagram - GameScreen Render Pipeline

skinparam linestyle ortho
skinparam rectangle {
  backgroundColor #F0FFF0
  borderColor Black
}

' Participants
rectangle "UI Thread" as UI
rectangle "GameScreen" as GameScreen
rectangle "Render" as Render
rectangle "Intro" as Intro
rectangle "Menu" as Menu
rectangle "EditMode" as EditMode
rectangle "PlayingMode" as PlayingMode
rectangle "Loaded" as Loaded
rectangle "Options" as Options
rectangle "TileManager" as TileManager
rectangle "EditTiles" as EditTiles
rectangle "TheButton" as TheButton

' Message Flow
UI -down- GameScreen : ↓ paintComponent()
GameScreen -down- Render : ↓ 1: render()

Render -left- Intro : ↓ 1.1a [INTRO]: render()\n ↓ 1.1a.1: startMusic()
Render -down- Menu : ↓ 1.1b [MENU]: render()\n ↓ 1.1b.1: drawBackground()\n ↓ 1.1b.2: drawButtons()
Render -right- TheButton : ↓ 1.1b.3 * drawStyled()
Menu -down- TheButton : ↓ 1.3.3: drawStyled() [for each button]

Render -down- EditMode : ↓ 1.1c [EDIT]: render()
EditMode -down- TileManager : ↓ 1.1c.1: getSprite()
EditMode -down- EditTiles : ↓ 1.1c.2: draw()\n ↓ 1.1c.2.1: drawButtons()
EditMode -down- EditMode : 1.1c.3: drawSelectedTile()

Render -down- PlayingMode : ↓ 1.1d [PLAYING]: render()
PlayingMode -down- TileManager : ↓ 1.1d.1: getSprite()
PlayingMode -down- PlayingMode : 1.1d.2: draw towers, enemies, projectiles

Render -down- Loaded : ↓ 1.1e [LOADED]: render()
Loaded -down- TileManager : ↓ 1.1e.1: getSprite()
Loaded -down- Loaded : 1.1e.2: draw towers, enemies, projectiles

Render -down- Options : ↓ 1.1f [OPTIONS]: render()\n ↓ 1.1f.1: ↓ drawButtons()
Options -down- TheButton : ↓ 1.1f.2: draw()

@enduml
